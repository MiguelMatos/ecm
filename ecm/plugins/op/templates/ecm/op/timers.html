{% extends "base.html" %}

{% load i18n %}
{% load static from staticfiles %}

{% block headtitle %}{% trans 'POS Timers' %}{% endblock %}
{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="{% static 'op/css/classes.css' %}" />
{% endblock %}
{% block main_content %}

<table class="table table-bordered" id="timer_table">
  <thead>
    <tr>
    {% for head in header %}
      <th class="top" scope="col" >{{ head }}</th>
    {% endfor %}
    </tr>
  </thead>
  <!--<tbody>
      {{ timers.items }}
  	{% for timer in timers %}
        <tr class="timer" style="{{timer.class}}">
            <td><a href="http://evemaps.dotlan.net/system/{{ timer.location }}" target="_blank">{{ timer.location}}</a></td>
        <td>{{ timer.structure }}</td>
        <td>{{ timer.cycle}}</td>
        <td>{{ timer.location_id }}</td>
        <td>{{ timer.moon_id }}</td>
        <td>{{ timer.owner }}</td>
        <td>{% if timer.friendly%}<i class="icon-ok icon-white"></i>{% else %}<i class="icon-remove icon-white"></i>{% endif %}</td>
        <td>{{ timer.timer }}</td>
        <td>{{ timer.notes }}</td>
        <td>{{ timer.time_remaining }}</td>
    </tr>
    {% endfor %}
  </tbody>--!>
  
  <tbody>                                                                                                
    <tr>
      <td colspan="10" class="dataTables_empty">{% trans 'Loading data from server...' %}</td>            
    </tr>
  </tbody>
</table>
System links provided by <span class="dotlan">dotlan &copy;</span>
{% endblock %}
{% block post_javascripts %}
<script type="text/javascript">                                                                          
//disable multi column sorting
$('#history_table thead th').click(function(event) {                                                     
    if (!$(event.target).hasClass('sorthandle')) {                                                       
        event.shiftKey = false;                                                                          
    }                                                                                                    
});                                                                                                      

// dataTable setup
$(document).ready(function() {
    table = $('#timer_table').dataTable( {                                                             
        bProcessing: true,                                                                               
        bServerSide: true,
        iDisplayLength: 25,
        sAjaxSource: "/op/timers/data/",                                                        
        sDom: 'rt',
        aoColumns: [
            { /* Location*/   sType: "html",    sWidth: "1%"},
            { /* Type*/       sType: "html",    sWidth: "5%"},
            { /* Cycle */     sType: "html",    sWidth: "2%"},
            { /* Planet */    sType: "html",    sWidth: "2%"},
            { /* Moon */      sType: "html",    sWidth: "2%"},
            { /* Owner */     sType: "html",    sWidth: "2%"},
            { /* Friendly */  sType: "html",    sWidth: "1%"},
            { /* Date */      sType: "html",    sWidth: "2%"},
            { /* Notes */     sType: "html",    sWidth: "5%"},
            { /* Remaining*/  sType: "string",  sWidth: "2%", sClass : "right" },                                      
        ],
	fnRowCallback: function(nRow, aaData, iDisplayIndex){
	    var bg = $('td:eq(10)', nRow).text();
	    $('tr', nRow).css('backgroundColor', bg);
	    $('td:eq(0)', nRow).addClass('testing');
	    return nRow;
	}
    });                                                                                                  
});
</script>
{% endblock %} 
