{% extends "base.html" %}

{% block headtitle %}{{supply.typeName}}{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="/s/ecm/css/jquery.dataTables.css" />
<link rel="stylesheet" type="text/css" href="/s/industry/css/industry.css" />
{% endblock %}

{% block javascripts %}
<script type="text/javascript">
AJAX_URL = '/industry/catalog/supplies/{{supply.typeID}}/data/';
SUPPLY_ID = {{supply.typeID}};
</script>
{% endblock %}

{% block compressed_javascripts %}
<script type="text/javascript" src="/s/ecm/js/lib/jquery.dataTables.js"></script>
<script type="text/javascript" src="/s/ecm/js/lib/jquery.jeditable.js"></script>
<script type="text/javascript"  src="/s/industry/js/supply_details.js" ></script>
{% endblock %}

{% block breadcrumbs %}
<li><a href="/">Home</a></li>
<li><a href="/industry">Industry</a></li>
<li><a href="/industry/catalog/supplies/">Supplies</a></li>
<li><a href="/industry/catalog/supplies/{{ supply.typeID }}/">{{ supply.typeName }}</a></li>
{% endblock %}

{% block main_content %}
<h1 class="pagetitle">{{supply.typeName}}</h1>

<table class="transparent">
  <tr>
    <td><img src="http://image.eveonline.com/Type/{{supply.typeID}}_64.png" /></td>
    <td>
      <table class="transparent">
        <tr>
          <td class="bold">Price</td>
          <td id="price">{{supply.price|ecm_price}}</td>
        </tr>
        <tr>
          <td class="bold">Auto-Update</td>
          <td>
            <input type="checkbox" id="update_checkbox" {% if supply.autoUpdate %}checked{% endif %} />
          </td>
        </tr>
        <tr>
          <td class="bold">Supply Source</td>
          <td>
          <select id="supply_source">
          {% for source in supplySources %}
            <option value="{{source.locationID}}"
                    {%if supply.supplySource == source%}selected{%endif%}>{{source.name}}</option>
          {% endfor %}
          </select>
          </td>
        </tr>
        <tr><td><input type="button" class="button" id="update_button" value="Update Price"/></td></tr>
      </table>
    </td>
  </tr>
</table>

<h2>Price History</h2>

<div  style="width: 50%;">
<table class="display table" id="pricehistory_table">
  <thead>
    <tr>
      {%for col in columns%}
      <th class="top" scope="col" >{{col}}</th>
      {%endfor%}
    </tr>
  </thead>
  <tbody>
    <tr>
      <td colspan="{{columns|length}}" class="dataTables_empty">Loading data from server...</td>
    </tr>
  </tbody>
</table>
</div>
{% endblock %}
