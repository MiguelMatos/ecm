{% extends "base.html" %}

{% block headtitle %}{{item.typeName}}{% endblock %}


{% block header_scripts %}
<link rel="stylesheet" type="text/css" href="/s/industry/css/industry.css" />
<script type="text/javascript" src="/s/ecm/js/lib/jquery.jeditable.js"></script>
<script type="text/javascript"  src="/s/industry/js/catalog_details.js" ></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#price').editable('/industry/catalog/{{ item.typeID }}/update/price/', {
        loadurl: '/industry/catalog/{{ item.typeID }}/price/',
        width: 300,
        method: 'GET'
    });
});
</script>
{% endblock %}


{% block breadcrumbs %}
<li><a href="/">Home</a></li>
<li><a href="/industry">Industry</a></li>
<li><a href="/industry/catalog/">Catalog</a></li>
<li><a href="/industry/catalog/{{ item.typeID }}/">{{ item.typeName }}</a></li>
{% endblock %}

{% block main_content %}
<h1 class="pagetitle">{{item.typeName}}</h1>

<table class="transparent">
  <tr>
    <td><img src="http://image.eveonline.com/Type/{{item.typeID}}_64.png" /></td>
    <td>
      <table class="transparent">
        <tr><td class="bold">Available</td><td>{{item.isAvailable}}</td></tr>
        <tr><td class="bold">Fixed Price</td><td id="price">{{item.fixedPrice|ecm_price}}</td></tr>
      </table>
    </td>
  </tr>
</table>

<h2>Owned Blueprints</h2>

<table>
  <thead>
    <tr>
      <th>Icon</th>
      <th>ME</th>
      <th>PE</th>
      <th>Original/Copy</th>
      <th>Runs</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
  {% for bp in item.blueprints.all %}
    <tr id="{{bp.id}}" title="{{bp.typeName}}">
      <td><img src="http://image.eveonline.com/Type/{{bp.blueprintTypeID}}_32.png" /></td>
      <td><input id="me" name="me" value="{{bp.me}}" size="2" maxlength="3"
             onKeyPress="return numbersonly(event);" onClick="this.select();"/></td>
      <td><input id="me" name="me" value="{{bp.pe}}" size="2" maxlength="3"
             onKeyPress="return numbersonly(event);" onClick="this.select();"/></td>
      <td>{% if bp.copy %}Copy{% else %}Original{% endif %}</td>
      <td>{% if bp.copy %}{{bp.runs}}{% else %}-{% endif %}</td>
      <td><input class="button" type="button" value="Delete Blueprint" onClick="deleteBlueprint({{bp.id}});"/></td>
    </tr>
  {% empty %}
    <tr><td colspan="4">None</td></tr>
  {% endfor %}
  </tbody>
</table>


<form method="post" action="/industry/catalog/{{ item.typeID }}/addblueprint/">
{% csrf_token %}
<table>
  <tr>
    <td>
      <label for="me">ME</label>
      <input id="me" name="me" value="0" size="2" maxlength="3"
             onKeyPress="return numbersonly(event);" onClick="this.select();"/>
    </td>
    <td>
      <label for="pe">PE</label>
      <input id="pe" name="pe" value="0" size="2" maxlength="3"
             onKeyPress="return numbersonly(event);" onClick="this.select();"/>
    </td>
    <td>
      <label for="copy">Copy</label>
      <input id="copy" type="checkbox" name="copy"/>
    </td>
    <td>
      <label for="runs">Runs</label>
      <input id="runs" name="runs" value="0" size="3" maxlength="3"
             onKeyPress="return numbersonly(event);" onClick="this.select();"/>
    </td>
    <td>
      <input class="button" type="submit" value="Add New Blueprint"/>
    </td>
  </tr>
</table>
</form>

{% endblock %}
