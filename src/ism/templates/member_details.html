{% extends "base.html" %}

{% block headtitle %}Member Details - {{ member.name }}{% endblock %}



{% block header_scripts %}
<script type="text/javascript" src="/static/js/lib/jquery.dataTables.min.js"></script>
<link rel="stylesheet" type="text/css" media="screen,projection,print" href="/static/css/demo_table.css" />

<script type="text/javascript">
const member_id = "{{ member.characterID }}";
</script>

<script type="text/javascript" src="/static/js/member_access_changes_table.js"></script>
{% endblock %}


{% block breadcrumbs %}
<li><a href="/">Home</a></li>
<li><a href="/members">Members</a></li>
<li><a href="/members/{{ member.characterID }}">{{ member.name }}</a></li>
{% endblock %}

{% block main_content %}
<h1 class="pagetitle {%if not member.corped %}error{% endif %}">{{ member.name }}{%if not member.corped %} NOT CORPED{% endif %}</h1>
<p class="italic" >{{ member.nickname }}</p>

<table class="transparent">
    <tr>
        <td>
            <img src="http://image.eveonline.com/Character/{{ member.characterID }}_128.jpg" style="border:none;"></img>
        </td>
        <td>
            <p>
            <span class="bold">Corp Date:</span> {{ member.corpDate }}<br/>
            <span class="bold">Last Login:</span> {{ member.lastLogin }}<br/>
            <span class="bold">Last Logoff:</span> {{ member.lastLogoff }}
            </p>
            <p>Last seen in <b>{{ member.location }}</b> in a <b>{{ member.ship }}</b> on {{ member.date }}</p>
        </td>
    </tr>
</table>

<h2>Access Level</h2>

<table class="table" ><tr class="row">
<td class="row-{{ member.color }}">
  <b>
    {% if member.is_director %}
    DIRECTOR
    {% else %}
    {{ member.accessLvl }}
    {% endif %}
  </b>
</td>
</tr></table>


<h2>Base Office</h2>
{% if member.baseID %}
{{ member.base }}
{% else %}
None
{% endif %}

<table class="transparent">
  <tr>
    <td>
      <h2>Titles</h2>
      <ul>
      {% for title in member.titles %}
        <li><a href="/titles/{{ title.titleID }}">{{ title.titleName }}</a></li>
        {% empty %}
        <p>No titles</p>
      {% endfor %}
      </ul>
    </td>
    <td>
      <h2>Extra Roles</h2>
      <ul>
      {% for role in member.roles %}
        <li>{{ role }}</li>
        {% empty %}
        <p>No extra roles</p>
      {% endfor %}
      </ul>
    </td>
  </tr>
</table>

<h2>Security Access Changes</h2>

<table class="table display" id="access_changes_table">
  <thead> 
    <tr>
      <th class="top" scope="col" >Change</th>
      <th class="top" scope="col" >Title/Role</th>
      <th class="top" scope="col" >Date</th>
    </tr>
  </thead>
  <tbody> 
    <tr>
      <td colspan="3" class="dataTables_empty">Loading data from server...</td>
    </tr>
  </tbody> 
  <tfoot> 
    <tr>
      <th>Change</th>
      <th>Title/Role</th>
      <th>Date</th>
    </tr>
  </tfoot>
</table>

{% endblock %}
